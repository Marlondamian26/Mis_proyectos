# Activa el entorno virtual
# En Windows:
# .\venv\Scripts\Activate.ps1    o     \venv\Scripts\activate      ----- para activar el entorno
#deactivate    ----  para salir del entorno

# Asegúrate de que el servidor esté corriendo
#python manage.py runserver      ------ correr el servidor
#Ctrl+C      ------ para detener el servidor

#npm run dev   ------ para iniciar el frontend

# 1. Abre la shell
#python manage.py shell   entrar al shell

#Mantener un archivo requirements.txt
# Después de instalar todo, guarda las dependencias
#pip freeze > requirements.txt    ----- actualizar después de instalar cada nueva dependencia

# Para restaurar después:
#pip install -r requirements.txt

# 3. Verificas que ahora aparece
#cat requirements.txt





#Migraciones:
# Antes de cambios importantes, copia las migraciones
#Copy-Item -Recurse .\usuarios\migrations .\usuarios\migrations_backup    ---- copia de migraciones

#PASOS:
# 1. Asegúrate de estar en la carpeta backend con el entorno virtual activado
#cd C:\Users\Marlon Damián\Belkis-saude\backend

# 2. Borrar la base de datos actual (opcional - si quieres empezar completamente limpio)
#Remove-Item .\db.sqlite3 -ErrorAction SilentlyContinue

# 3. Borrar TODAS las migraciones de todas las apps (PERO conserva __init__.py)
#Remove-Item .\usuarios\migrations\*.py -Exclude __init__.py -ErrorAction SilentlyContinue
#Remove-Item .\notificaciones\migrations\*.py -Exclude __init__.py -ErrorAction SilentlyContinue
# Si tienes otras apps, agrégalas aquí

# 4. Asegurar que los __init__.py existen
#New-Item -Path .\usuarios\migrations\__init__.py -ItemType File -Force
#New-Item -Path .\notificaciones\migrations\__init__.py -ItemType File -Force

# 5. Crear TODAS las migraciones desde cero
#python manage.py makemigrations usuarios
#python manage.py makemigrations notificaciones
# Si tienes otras apps, haz makemigrations para cada una

# 6. Ver las migraciones pendientes (opcional)
#python manage.py showmigrations

# 7. Aplicar TODAS las migraciones
#python manage.py migrate

# 8. Crear superusuario (tu tía)
#python manage.py createsuperuser
# Username: belkis_admin
# Email: (opcional)
# Password: admin123
# Password (again): admin123

# 9. Verificar que todo está bien
#python manage.py check


# 10. Verifica si existe el superusuario 'belkis_admin'
#python manage.py shell -c "from django.contrib.auth import get_user_model; User = get_user_model(); print('Existe' if User.objects.filter(username='belkis_admin', is_superuser=True).exists() else 'No existe')"





#Cuando hacer migraciones: Al hacer cambios en código o añadir nuevas librerías,al clonar el repositorio.
#python manage.py makemigrations  ----- Después de cambiar models.py
#python manage.py migrate         ----- Después de makemigrations




#Si mañana tu PC explota:
# 1. Instalar Python
# 2. Clonar proyecto
# 3. Crear venv
#python -m venv venv
#.\venv\Scripts\activate

# 4. ¡MAGIA! Un comando y todo igual:
#pip install -r requirements.txt

# 5. Aplicar migraciones
#python manage.py migrate

# 6. Listo, igual que antes




#Crear super ususarios
#python manage.py shell -c "from usuarios.models import Usuario; u=Usuario.objects.get(username='belkis_admin'); print(f'Username: {u.username}, Rol: {u.rol}, Superuser: {u.is_superuser}')"













#Comandos completos para migraciones limpuas desde cero:
#cd backend
#Remove-Item .\db.sqlite3 -ErrorAction SilentlyContinue
#Remove-Item .\usuarios\migrations\*.py -Exclude __init__.py -ErrorAction SilentlyContinue
#Remove-Item .\notificaciones\migrations\*.py -Exclude __init__.py -ErrorAction SilentlyContinue
#New-Item -Path .\usuarios\migrations\__init__.py -ItemType File -Force
#New-Item -Path .\notificaciones\migrations\__init__.py -ItemType File -Force
#python manage.py makemigrations usuarios
#python manage.py makemigrations notificaciones
#python manage.py migrate
#python manage.py createsuperuser